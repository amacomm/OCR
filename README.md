# OCR
## Распознование текста
Для распознования текста в данном коде используется Tesseract, для его работы программа должен быть установлен инструментарий ([ссылка](https://github.com/UB-Mannheim/tesseract/wiki)) и записан путь до запускающего файла в поле ```pytesseract.pytesseract.tesseract_cmd```.
Для получения текста из изображения используется метод ```pytesseract.image_to_string()```. В данном коде ведётся сравнение распознаваемого текста с предполагающимся на изображениии для этого предусмотренны функции `result()` и `otsev()`.
Первая предполагает получения оценки по оригинальному изображению и прошедшему 4 фильтра:
* чёрно-белое (`get_grayscale`),
* порог (`thresholding`),
* раскрытие (`openin`),
* выделение контура (`cann`).\
Вторая только по оригинальному изображению. В качестве аргументов принимаются путь до изображения и предполагаемый текст на нём.
Для определения точности результатов используется функция `similarity()` принимающая на фход две строки и возвращающая точность в диапазоне 0 - 1.

## Датасет
Для определения точности определения текста в данном коде используется среднеарефметическая оценка точности по датасету. Датасет состоит из изображений (путь к папке с изображениями записывается в `directory1`)
и текстовых документов с текстом на изображениях (путь к папке с текстовыми документами `directory2`).

###### Примеры папок
![Текстовая папка](https://ie.wampi.ru/2022/05/11/2022-05-11.png)
![Папка с изображениями](https://ie.wampi.ru/2022/05/11/2022-05-11-1.png)

Текст может быть представлен по разному в датасете, единственное что вам необходимо, это привести его к виду строки, которую можно подать в функцию в качестве аргумента. (В некоторых ситуациях датасет может состоять из одного файла с тексом разбитым по строкам и имеющим некоторые доп. символы, используйте  в таких ситуациях регулярные выражения 
(как например ```
' '.join(re.findall(r'"([^"]+)"', t))``` для выделения текста между двойными ковычками)).


## Функции в коде
Данный код содержит функции позволяющие применить к изображению 7 фильтров:
* чёрно-белое (`get_grayscale`),
* порог (`thresholding`),
* делатацию (`dilate`),
* эрозию (`erode`),
* раскрытие (`openin`),
* выделение контура (`cann`),
* медианный фильтр (`remove_noise`).\
Можно просмотреть изображение с использованием функции `ShowImage`. Также есть функция для выравнивания текста `deskew`.
